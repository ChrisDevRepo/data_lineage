# ==============================================================================
# Vibecoding Lineage Parser v3 - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp .env.template .env
# ==============================================================================

# ------------------------------------------------------------------------------
# DuckDB Configuration
# ------------------------------------------------------------------------------
# Path to persistent DuckDB workspace file
DUCKDB_PATH=lineage_workspace.duckdb

# Optional: DuckDB memory limit (e.g., '4GB', '8GB')
# DUCKDB_MEMORY_LIMIT=4GB

# ------------------------------------------------------------------------------
# Output Configuration
# ------------------------------------------------------------------------------
# Directory for output JSON files
OUTPUT_DIR=lineage_output

# Output format (internal|frontend|both)
OUTPUT_FORMAT=both

# ------------------------------------------------------------------------------
# Parquet Snapshots Configuration
# ------------------------------------------------------------------------------
# Directory containing input Parquet files
PARQUET_SNAPSHOTS_DIR=parquet_snapshots

# ------------------------------------------------------------------------------
# Parser Configuration
# ------------------------------------------------------------------------------
# Minimum confidence threshold for including dependencies (0.0 - 1.0)
MIN_CONFIDENCE_THRESHOLD=0.5

# Skip query log analysis (true/false)
# Set to true if query logs are unavailable or DMV has limited retention
SKIP_QUERY_LOG_ANALYSIS=false

# ------------------------------------------------------------------------------
# AI Disambiguation Configuration (NEW in v3.7.0)
# ------------------------------------------------------------------------------
# Enable/disable AI-assisted disambiguation (true/false)
# When enabled, AI helps resolve ambiguous table references for SPs with confidence ≤ threshold
AI_ENABLED=true

# Parser confidence threshold to trigger AI disambiguation (0.0 - 1.0)
# Default: 0.85 (SPs with confidence ≤ 0.85 will use AI assistance)
AI_CONFIDENCE_THRESHOLD=0.85

# Minimum AI confidence to accept result (0.0 - 1.0)
# Results below this threshold are rejected and fall back to parser result
AI_MIN_CONFIDENCE=0.70

# Maximum retry attempts with refined prompts
# Default: 2 (one initial attempt + one retry)
AI_MAX_RETRIES=2

# API timeout in seconds
# Default: 10 seconds per AI call
AI_TIMEOUT_SECONDS=10

# ------------------------------------------------------------------------------
# Incremental Load Configuration
# ------------------------------------------------------------------------------
# Enable incremental parsing (true/false)
ENABLE_INCREMENTAL_LOAD=true

# Force full refresh even if incremental is enabled (true/false)
FORCE_FULL_REFRESH=false

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
# Log level (DEBUG|INFO|WARNING|ERROR)
LOG_LEVEL=INFO

# Enable rich console output with colors and formatting (true/false)
ENABLE_RICH_CONSOLE=true

# ------------------------------------------------------------------------------
# Development/Testing Configuration
# ------------------------------------------------------------------------------
# Enable debug mode (true/false)
DEBUG_MODE=false

# Sample size for testing (optional - processes only N objects)
# Useful for testing with a small subset of data
# TEST_SAMPLE_SIZE=100

# ------------------------------------------------------------------------------
# API / Azure Deployment Configuration
# ------------------------------------------------------------------------------
# Comma-separated list of allowed CORS origins for API
# Development: http://localhost:3000
# Production: https://your-frontend-app.azurewebsites.net
ALLOWED_ORIGINS=http://localhost:3000

# ==============================================================================
# Security Notes
# ==============================================================================
# - NEVER commit .env to version control
# - Use read-only database users for production
# - Rotate credentials regularly
# - Consider using Azure Key Vault for production secrets
# - Update ALLOWED_ORIGINS for Azure deployment
# ==============================================================================
