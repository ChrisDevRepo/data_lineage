# ==============================================================================
# Data Lineage Visualizer v4.1.3 - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp .env.template .env
#
# ⚠️  SECURITY WARNING:
# - This .env.template file IS committed to git - DO NOT add secrets here!
# - Your local .env file is gitignored and will NEVER be committed
# - Only add secrets/passwords to your local .env file (not this template)
# - For production, use Azure App Service Configuration for secrets
#
# NOTE: Most configuration is done via CLI flags. This file is for
# environment-specific settings only. See `python lineage_v3/main.py run --help`
# ==============================================================================

# ------------------------------------------------------------------------------
# Path Configuration (Optional - defaults are usually sufficient)
# ------------------------------------------------------------------------------
# DuckDB workspace database file path
PATH_WORKSPACE_FILE=lineage_workspace.duckdb

# Output directory for JSON files
PATH_OUTPUT_DIR=lineage_output

# Default directory for Parquet snapshots (can be overridden via CLI --parquet)
PATH_PARQUET_DIR=parquet_snapshots

# ------------------------------------------------------------------------------
# Parser Quality Thresholds (Advanced - usually not needed)
# ------------------------------------------------------------------------------
# High confidence threshold for SQLGlot + Regex agreement
PARSER_CONFIDENCE_HIGH=0.85

# Medium confidence threshold for partial agreement
PARSER_CONFIDENCE_MEDIUM=0.75

# Low confidence threshold (fallback to regex only)
PARSER_CONFIDENCE_LOW=0.5

# Good match threshold (±10% difference between parsers)
PARSER_THRESHOLD_GOOD=0.10

# Fair match threshold (±25% difference between parsers)
PARSER_THRESHOLD_FAIR=0.25

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
# Log level (DEBUG|INFO|WARNING|ERROR|CRITICAL)
# Default: INFO
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Runtime Configuration
# ------------------------------------------------------------------------------
# Enable debug mode (additional logging and validation)
# Default: false
DEBUG_MODE=false

# Skip query log analysis (use when query_logs.parquet is unavailable)
# Can also be set via CLI: --skip-query-logs
SKIP_QUERY_LOGS=false

# ------------------------------------------------------------------------------
# API / Azure Deployment Configuration
# ------------------------------------------------------------------------------
# Comma-separated list of allowed CORS origins for the FastAPI backend
# Development: http://localhost:3000
# Production: https://your-frontend-app.azurewebsites.net
ALLOWED_ORIGINS=http://localhost:3000

# ------------------------------------------------------------------------------
# Phantom Object Configuration (v4.3.3 - REDESIGNED)
# ------------------------------------------------------------------------------
# EXTERNAL schemas for phantom object tracking
#
# Philosophy (v4.3.3):
# - Phantoms = dependencies on EXTERNAL sources NOT in our metadata database
# - For schemas in OUR metadata DB, missing objects = DB quality issues (not our concern)
# - We are NOT the authority to flag missing objects in schemas we manage
#
# Format: Exact schema names (case-insensitive), comma-separated, NO wildcards
# Examples: power_consumption,external_lakehouse,partner_erp,azure_data_lake
#
# Leave EMPTY if you don't have external dependencies:
PHANTOM_EXTERNAL_SCHEMAS=

# OLD APPROACH (v4.3.2): Wildcard patterns tracked ALL missing objects
# PHANTOM_INCLUDE_SCHEMAS=CONSUMPTION*,STAGING*,TRANSFORMATION*
# PROBLEM: Polluted phantoms with internal DB quality issues (stale tables, typos)

# Object name patterns to exclude in dbo schema (CTEs, temp tables, variables)
# Examples: cte, cte_*, CTE*, ParsedData, #*, @*, temp_*, tmp_*
PHANTOM_EXCLUDE_DBO_OBJECTS=cte,cte_*,CTE*,ParsedData,#*,@*,temp_*,tmp_*

# ==============================================================================
# Security Notes
# ==============================================================================
# - NEVER commit .env to version control (.env is in .gitignore)
# - Update ALLOWED_ORIGINS for Azure deployment with your frontend URL
# - Consider using Azure App Service Configuration for production secrets
# - All CLI options can override these environment variables
# ==============================================================================
#
# CLI Usage Examples:
# ==============================================================================
# Full refresh (re-parse everything):
#   python lineage_v3/main.py run --parquet parquet_snapshots/ --full-refresh
#
# Incremental mode (default, only re-parse changed objects):
#   python lineage_v3/main.py run --parquet parquet_snapshots/
#
# Skip query logs (when query_logs.parquet is unavailable):
#   python lineage_v3/main.py run --parquet parquet_snapshots/ --skip-query-logs
#
# Custom output directory:
#   python lineage_v3/main.py run --parquet parquet_snapshots/ --output custom_output/
#
# For all options:
#   python lineage_v3/main.py run --help
# ==============================================================================
