üöÄ Vibecoding Lineage Parser v3.0.0
üìÇ Parquet directory: parquet_snapshots/
üìÅ Output directory: lineage_output/
üîÑ Mode: Incremental
üìä Format: both
üíæ Workspace: lineage_workspace.duckdb

======================================================================
Step 1: Ingest Parquet files into DuckDB
======================================================================
‚úÖ Loaded Parquet files:
   - objects: 85 rows
   - dependencies: 6 rows
   - definitions: 17 rows
   - query_logs: 1,634 rows

üìä Workspace Statistics:
   - Total objects: 85
   - Dependencies: 6
   - Definitions: 17
   - Metadata cache: 16

üîç Objects requiring analysis: 69

======================================================================
Step 2-3: DMV Dependencies & Query Logs
======================================================================
‚ö†Ô∏è  DMV baseline extraction not yet implemented
üìã Coming in integration phase

======================================================================
Step 4: Detect Gaps (Missing Dependencies)
======================================================================
üîç Found 2 objects with missing dependencies
üìã Sample gaps (showing 2):
   1. dbo.LogMessage (Stored Procedure)
   2. dbo.spLastRowCount (Stored Procedure)

üìä Gap Statistics:
   - Total objects: 85
   - Parsed: 16
   - Gaps: 71 (83.5%)

======================================================================
Step 5: SQLGlot Parser (Fill Gaps)
======================================================================
üîÑ Parsing 2 objects...
'CREATE PROC [dbo].[LogMessage] @LogLevel [Varchar](255),@HostName [Varchar](255),@CallSite [Varchar]' contains unsupported syntax. Falling back to parsing as a 'Command'.
SQLLineage parse failed for object_id 686625489: This SQL statement is unparsable, please check potential syntax error for SQL:
CREATE PROC [dbo].[LogMessage] @LogLevel [Varchar](255),@HostName [Varchar](255),@CallSite [Varchar](255),@ProcessId [Varchar](500),@ProcessName [Varchar](500),@Message [Varchar](4000),@AffectedRecordCount [int],@ErrorNum [bigint],@ErrorLine [int],@ErrorSeverity [int],@ErrorState [int] AS BEGIN /********************************************************************************** This MSG variable is just if in case "LogMessage" SP itself run in to an error then in the RAISERROR, log what was the original sp in which error was occured **********************************************************************************/ DECLARE @MSG VARCHAR(350) = @ProcessName + ': ' + @Message BEGIN /* TRY */ DECLARE @currDate datetime = GetUTCDate() DECLARE @currSpid smallint = @@SPID INSERT INTO [ADMIN].Logs ( [CreateDateTimeUTC] ,[LogLevel] ,[HostName] ,[CallSite] ,[SessionId] ,[ProcessId] ,[ProcessName] ,[Message] ,[AffectedRecordCount] ,[ErrorNum] ,[ErrorLine] ,[ErrorSeverity] ,[ErrorState] ) VALUES ( @currDate ,@LogLevel ,@HostName ,@CallSite ,@currSpid ,@ProcessId ,@ProcessName ,@Message ,@AffectedRecordCount ,@ErrorNum ,@ErrorLine ,@ErrorSeverity ,@ErrorState ) END /* TRY */ BEGIN /* CATCH */ -- DECLARE @ErrorProcedure nvarchar(126) ,@ErrorMessage nvarchar(max) DECLARE @ErrorProcedure nvarchar(126) ,@ErrorMessage varchar(4000) DECLARE @ProcName NVARCHAR(128) = '[dbo].[LogMessage]' -- store all the error information for logging the error SELECT @ErrorNum = ERROR_NUMBER() ,@ErrorLine = 0 ,@ErrorSeverity = ERROR_SEVERITY() ,@ErrorState = ERROR_STATE() ,@ErrorProcedure = ERROR_PROCEDURE() ,@ErrorMessage = ERROR_MESSAGE() -- if there is a pending transation roll it back IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION SET @MSG = @MSG + CHAR(13) + 'Proc Error: ' + @ProcName + ' - ' + ISNULL(@ErrorMessage, ' ') -- RAISERROR removed END /* CATCH */ END
Line 1, Position 1: Found unparsable section: 'CREATE PROC [dbo].[LogMessage] @LogLevel...'
SQLLineage parse failed for object_id 878626173: This SQL statement is unparsable, please check potential syntax error for SQL:
CREATE PROC [dbo].[spLastRowCount] @Count [BIGINT] OUT AS BEGIN --NOTE: DUMMY SP to avoid warnings in DB project --chwa 2025-10-14 DECLARE @somevar nvarchar(32) = ( SELECT 1 ); SET @Count = ( SELECT 1 ); END
Line 1, Position 1: Found unparsable section: 'CREATE PROC [dbo].[spLastRowCount] @Coun...'

‚úÖ SQLGlot parsing complete:
   - Successfully parsed: 2
   - Failed: 0
   - Success rate: 100.0%

======================================================================
‚ö†Ô∏è  Remaining steps not yet implemented
======================================================================
üìã Next phases:
   - Step 6: AI Fallback (Phase 5)
   - Step 7: Merge all sources
   - Step 8: Generate output JSON (Phase 6)

‚úÖ Phase 4 (SQLGlot Parser) - COMPLETE
   - Gap detector implemented
   - SQLGlot AST parser working
   - Metadata tracking functional
   - Workspace saved to: lineage_workspace.duckdb
