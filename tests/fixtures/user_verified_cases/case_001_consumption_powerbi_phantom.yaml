# User-Verified Test Case
# Auto-loaded by tests/unit/test_user_verified_cases.py

sp_name: "spLoadFactLaborCostForEarnedValue_Post"
schema_name: "CONSUMPTION_ClinOpsFinance"
reported_date: "2025-11-17"
reported_by: "user"
issue: "CONSUMPTION_POWERBI schema not showing as phantom in graph"
root_cause: "CONSUMPTION_POWERBI should be marked as phantom (external schema) but not appearing in graph"
fix_version: "pending"
fix_description: "Investigation needed - verify phantom detection and configuration"

# Expected parsing results (verified by user)
expected_inputs:
  - "CONSUMPTION_POWERBI.FactLaborCostForEarnedValue"
  - "CONSUMPTION_ClinOpsFinance.CadenceBudget_LaborCost_PrimaContractUtilization_Junc"

expected_outputs:
  - "CONSUMPTION_ClinOpsFinance.FactLaborCostForEarnedValue_Post"

expected_confidence: 100

# DDL snippet for test reproducibility
ddl_snippet: |
  CREATE PROCEDURE [CONSUMPTION_ClinOpsFinance].[spLoadFactLaborCostForEarnedValue_Post]
  AS
  BEGIN
      INSERT INTO [CONSUMPTION_ClinOpsFinance].[FactLaborCostForEarnedValue_Post]
      SELECT *
      FROM [CONSUMPTION_POWERBI].[FactLaborCostForEarnedValue] lc
      LEFT JOIN [CONSUMPTION_ClinOpsFinance].[CadenceBudget_LaborCost_PrimaContractUtilization_Junc]
      ON lc.id = CadenceBudget_LaborCost_PrimaContractUtilization_Junc.id;
  END

# What NOT to change (prevents regression)
do_not_change:
  - "Phantom detection logic for external schemas"
  - "Schema filtering in graph rendering"
  - "PHANTOM_EXTERNAL_SCHEMAS configuration"
